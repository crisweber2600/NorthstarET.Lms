# 02 — User Journeys (UI-agnostic)

Journeys are intentionally UI‑agnostic; assume a BFF sits in front of LMS.

## LMS‑UJ‑001 — Provision a tenant (Platform Admin)

1. Admin submits district metadata.
2. LMS allocates isolated data plane, seeds system school/roles, emits TenantProvisioned.
3. Admin receives endpoint & tenantId; can now add schools.

**Alternate:** If region quota exceeded → return 409 with retry‑after; no partial tenant visible; no events published.

## LMS‑UJ‑010 — Create school (District Admin)

1. Admin selects tenant, posts new school.
2. LMS validates name uniqueness per tenant; creates school; emits SchoolCreated.
3. UI lands on school detail with autogenerated externalRef slot.

**Alternate:** Duplicate name → 409 with conflictId and existing school link.

## LMS‑UJ‑020 — Create class & assign teacher (School Admin)

1. Admin creates class in a school.
2. LMS persists class; emits ClassCreated.
3. Admin assigns teacher; LMS emits TeacherAssignedToClass.

**Alternate:** Teacher not in tenant → 422 validation with problem details.

## LMS‑UJ‑030 — Enroll students (Registrar)

1. Registrar uploads CSV of student IDs & class IDs (or posts JSON batch).
2. LMS validates rows; creates students if needed (optional setting), upserts enrollments; emits StudentCreated, EnrollmentAdded.
3. Registrar sees job status and per‑row results.

**Alternate:** Mixed valid/invalid rows → partial success; job report available; failed rows retriable with idempotency keys.

## LMS‑UJ‑040 — Teacher views roster (Teacher)

1. Teacher requests class members.
2. LMS returns one payload including students & teachers (no N+1).

**Alternate:** Teacher lacks permission → 403 with audit entry.

## LMS‑UJ‑050 — Deactivate student (Registrar)

1. Registrar deactivates a student.
2. LMS flags student inactive; emits StudentDeactivated; future enrollments blocked.

**Alternate:** Student currently in active assessment (FYI from Assessment via its read model) → still allowed; LMS is not orchestrator; notice included in response.
